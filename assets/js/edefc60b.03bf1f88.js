"use strict";(self.webpackChunkslatedb_website=self.webpackChunkslatedb_website||[]).push([[624],{6496:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>h,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"performance","title":"Performance","description":"We currently have two benchmarking tools: bencher and microbenchmarks.","source":"@site/docs/performance.md","sourceDirName":".","slug":"/performance","permalink":"/docs/performance","draft":false,"unlisted":false,"editUrl":"https://github.com/slatedb/slatedb-website/tree/main/docs/performance.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"FAQ","permalink":"/docs/faq"}}');var s=t(4848),i=t(8453);const h={sidebar_position:7},o="Performance",a={},c=[{value:"Benchmarks",id:"benchmarks",level:2},{value:"Nightly",id:"nightly",level:3},{value:"Microbenchmarks",id:"microbenchmarks",level:2},{value:"Nightly",id:"nightly-1",level:3}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"performance",children:"Performance"})}),"\n",(0,s.jsxs)(r.p,{children:["We currently have two benchmarking tools: ",(0,s.jsx)(r.strong,{children:"bencher"})," and ",(0,s.jsx)(r.strong,{children:"microbenchmarks"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"benchmarks",children:"Benchmarks"}),"\n",(0,s.jsxs)(r.p,{children:["SlateDB comes with a ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb/tree/main/slatedb-bencher",children:"bencher"})," tool to benchmark put/get operations against an object store. You can configure the tool with a variety of options. See ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb/blob/main/slatedb-bencher/README.md",children:"bencher/README.md"})," for details. ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb/blob/main/slatedb-bencher/benchmark-db.sh",children:"benchmark-db.sh"})," also serves as an example."]}),"\n",(0,s.jsx)(r.h3,{id:"nightly",children:"Nightly"}),"\n",(0,s.jsxs)(r.p,{children:["We run bencher ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb/blob/main/.github/workflows/nightly.yaml",children:"nightly"})," and publish the results ",(0,s.jsx)(r.a,{href:"https://slatedb.io/performance/benchmarks/main",children:"here"}),". The benchmark runs on ",(0,s.jsx)(r.a,{href:"https://warpbuild.com",children:"WarpBuild"}),"'s ",(0,s.jsx)(r.a,{href:"https://docs.warpbuild.com/cloud-runners",children:"warp-ubuntu-latest-x64-16x"})," runners, which use Hetzner machines in Frankfurt. We use ",(0,s.jsx)(r.a,{href:"https://www.tigrisdata.com/",children:"Tigris"})," for object storage with the ",(0,s.jsx)(r.code,{children:"auto"})," region setting, which resolves to Frankfurt as well. Bandwidth between WarpBuild (Hetzner) and Tigris seems to be about 500MiB/s down and 130MiB/s up. We routinely max out the bandwidth in the nightly tests."]}),"\n",(0,s.jsx)("iframe",{src:"https://slatedb.io/performance/benchmarks/main",width:"100%",height:"540px"}),"\n",(0,s.jsx)(r.h2,{id:"microbenchmarks",children:"Microbenchmarks"}),"\n",(0,s.jsxs)(r.p,{children:["We use ",(0,s.jsx)(r.a,{href:"https://bheisler.github.io/criterion.rs/",children:"Criterion"})," to run microbenchmarks (located in ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb/tree/main/slatedb/benches",children:"benches"}),") for specific internal SlateDB functions. A comment is left on all PRs when a > 200% slowdown is detected."]}),"\n",(0,s.jsx)(r.h3,{id:"nightly-1",children:"Nightly"}),"\n",(0,s.jsxs)(r.p,{children:["Microbenchmarks also run ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb/blob/main/.github/workflows/nightly.yaml",children:"nightly"})," with the ",(0,s.jsx)(r.a,{href:"https://github.com/tikv/pprof-rs",children:"pprof-rs"})," profiler. The resulting profiler protobuf files are published ",(0,s.jsx)(r.a,{href:"https://github.com/slatedb/slatedb-website/tree/gh-pages/performance/microbenchmark-pprofs/main",children:"here"}),". The microbenchmarks run on ",(0,s.jsx)(r.a,{href:"https://docs.github.com/en/actions/using-github-hosted-runners/using-github-hosted-runners/about-github-hosted-runners#standard-github-hosted-runners-for-public-repositories",children:"standard Linux Github action runners"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["We highly recommend using ",(0,s.jsx)(r.a,{href:"https://pprof.me/",children:"pprof.me"})," to view the ",(0,s.jsx)(r.code,{children:"<microbenchmar>.pb"})," files, though any ",(0,s.jsx)(r.a,{href:"https://github.com/google/pprof",children:"pprof"})," compatible tool may be used."]})]})}function d(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>h,x:()=>o});var n=t(6540);const s={},i=n.createContext(s);function h(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:h(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);